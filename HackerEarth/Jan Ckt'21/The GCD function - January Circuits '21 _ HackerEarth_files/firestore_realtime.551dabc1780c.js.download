// Global Firestore instance
function get_realtime_collection_names(){var a=[],b=$("[id^=realtime-collection-name]");for(var c=0;c<b.length;c++){var d=$(b[c]).text();d&&a.push(d)}return a}function snapshot_received(a){if(a.type==="added"){var b=a.doc.data();b&&update_html(b)}}function update_html(msg){var msg_timestamp=msg.timestamp,html_el_id=msg.html_id,accepted_timedelta=msg.accepted_timedelta,message=msg.message,ntf_type=msg.ntf_type,insert_mode=msg.insert_mode,hyperlink=encodeURI(msg.hyperlink),callback=msg.callback,callback_args=msg.callback_args,locking_enabled=msg.locking,animate_enabled=msg.animate,html=message,html_el=$("#"+html_el_id),el_timestamp=html_el.attr("timestamp");typeof el_timestamp=="undefined"&&(el_timestamp=0);try{el_timestamp=parseFloat(el_timestamp),msg_timestamp=parseFloat(msg_timestamp);if(msg_timestamp<el_timestamp)return;if(accepted_timedelta!=undefined){var current_time=Date.now()/1e3;if(current_time-msg_timestamp>accepted_timedelta)return}}catch(err){return}if(html_el_id==="common-notification"){html=createNotificationDiv(message,ntf_type,hyperlink),html=html_decode(html);var new_notification=$(html);new_notification.appendTo(html_el),new_notification.delay(15e3).fadeOut(1e3)}else{html=html_decode(html);switch(insert_mode){case"append":html_el.append(html),animate_enabled&&animateUpdatedElement(html_el);break;case"insert":html_el.html(html);if(animate_enabled){var updated_el_index=html_el.children().length-1;if(updated_el_index>-1)var updated_el=html_el.children()[updated_el_index];else var updated_el=html_el;animateUpdatedElement(updated_el)}break;case"prepend":html_el.prepend(html);if(animate_enabled){var updated_el=html_el.children()[0];animateUpdatedElement(updated_el)}break;case"delete":html_el.empty();break;case"replace":html_el.replaceWith(html),animate_enabled&&animateUpdateElement(html_el);break;case"idle":}}html_el.attr("timestamp",msg_timestamp);if(insert_mode=="insert"){var scripts=html_el.find("script"),len=scripts.length;for(var i=0;i<len;++i){var script=scripts[i],scriptEl=$(script);eval(scriptEl.text())}}if(callback)try{window[callback].apply(this,callback_args)}catch(e){}}function animateUpdatedElement(a){var b=700;$(a).hide().fadeIn(b)}function createNotificationDiv(a,b,c){var d="",e="<div class='notification-close'><i class='fa fa-times fa-lg lighter' aria-hidden='true'></i></div>",f="<div class='"+d+" notification-container dark'>"+a+e+"</div>";return c&&(d+=" pointer",f="<div class='"+d+" notification-container'>"+a+e+"<a class='notification-link' href='"+c+"' target='_blank'></a></div>"),f}function html_decode(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}function makeid(){var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}function spawnNotification(a,b,c){var d={body:b,icon:"https://static-fastly.hackerearth.com/static/hackerearth/images/logo/HE_identity.png"};if("hidden"in document&&document.hidden){var e=new Notification(a,d);c&&(e.onclick=function(){window.location.href=c})}}var firebaseApp=null;firebaseApp=firebase.initializeApp(window.firebaseConfig,name="mycareerstack");var CustomRealTimeMessageListener=function(a,b,c){this.collectionName=a+"-"+b,this.firestoreDB=firebase.firestore(firebaseApp),this.collection=this.firestoreDB.collection(this.collectionName),this.collection.where("timestamp",">",new Date).onSnapshot(function(a){a.docChanges().forEach(c)})};window.CustomRealTimeMessageListener=CustomRealTimeMessageListener,$(document).ready(function(){var a=firebase.firestore(firebaseApp);if(!a)return;var b=get_realtime_collection_names();for(var c=0;c<b.length;c++){var d=b[c],e=a.collection(d);e.where("timestamp",">",new Date).onSnapshot(function(a){a.docChanges().forEach(snapshot_received)})}});var eventStartNotification=function(a,b,c){"Notification"in window?Notification.permission==="granted"?spawnNotification(a,b,c):Notification.permission!=="denied"&&Notification.requestPermission(function(d){if(d!=="granted")return;spawnNotification(a,b,c)}):console.log("Seems like your browser is outdated, please update your browser.")},requestDesktopNotificationPermission=function(a){Notification.permission!="granted"&&Notification.requestPermission().then(function(b){var c="Kudos! We will notify you when Challenge starts.",d="Make sure you've enabled web notifications in your HackerEarth profile settings.";spawnNotification(c,d,a)})};